import * as sqlite3 from './sqlite3.pure';
import Statement from './pure/statement';
import Database from './pure/database';
import { last, tick } from './pure/util';

module.exports = sqlite3;
module.exports.Database = Database;
module.exports.Statement = Statement;

// FIXME: this is a placeholder without functionality
module.exports.Backup = class Backup {
  completed = false;

  constructor(filename: string, ...params: any[]) {
    this.completed = true;

    if (typeof last(params) === 'function') {
      const callback = last(params);
      tick(() => callback(null));
    }
  }

  step(smth: any, callback: any) {
    tick(() => callback(null));
  }

  finish(callback: any) {
    tick(() => callback(null));
  }
};
